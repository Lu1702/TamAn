<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MÃ n hÃ¬nh Báº¿p</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>ÄÆ¡n hÃ ng realtime</h1>
    <h3 style="color: gray">Äang chá» tÃ­n hiá»‡u tá»« Server...</h3>
    
    <div id="logs" style="border: 2px dashed #333; padding: 20px; height: 300px; overflow-y: scroll; background: #d28989;">
        </div>

    <script>
        // 1. Káº¿t ná»‘i tá»›i Server Node.js cá»§a báº¡n (Cá»•ng 5000)
        const socket = io("http://localhost:5000");

        // 2. Khi káº¿t ná»‘i thÃ nh cÃ´ng
        socket.on("connect", () => {
            console.log("âœ… ÄÃ£ káº¿t ná»‘i vá»›i Server!");
            addLog("ÄÃ£ káº¿t ná»‘i tá»›i há»‡ thá»‘ng Báº¿p!");
        });

        // 3. QUAN TRá»ŒNG: Láº¯ng nghe sá»± kiá»‡n 'new_order' mÃ  báº¡n vá»«a code trong API
        socket.on("new_order", (data) => {
            console.log("Nháº­n Ä‘Æ¡n:", data);
            
            // Hiá»‡n thÃ´ng bÃ¡o lÃªn mÃ n hÃ¬nh
            addLog(`
                <div style="background: #e6fffa; border: 1px solid #00b894; padding: 10px; margin-bottom: 5px; border-radius: 5px;">
                    <h3 style="color: #00b894; margin: 0;">ğŸ”” TING TING! CÃ“ ÄÆ N Má»šI!</h3>
                    <p><b>KhÃ¡ch hÃ ng:</b> ${data.customer}</p>
                    <p><b>Tá»•ng tiá»n:</b> ${data.total} VNÄ</p>
                    <small>Thá»i gian: ${data.time}</small>
                </div>
            `);
            
            // Báº­t cá»­a sá»• thÃ´ng bÃ¡o cá»§a trÃ¬nh duyá»‡t
            alert(`CÃ“ ÄÆ N HÃ€NG Má»šI!\nKhÃ¡ch: ${data.customer}`);
        });

        // HÃ m há»— trá»£ in chá»¯ ra mÃ n hÃ¬nh web
        function addLog(htmlContent) {
            const div = document.getElementById("logs");
            div.innerHTML = htmlContent + div.innerHTML; // Tin má»›i nháº¥t lÃªn Ä‘áº§u
        }
    </script>
</body>
</html>